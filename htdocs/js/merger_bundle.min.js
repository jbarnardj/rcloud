RCloudNotebookMerger={},RCloud.UI.addons.notebook_merge={init:()=>{const e=new class{constructor(){this.model=null,this.view=null,this.controller=null}show(){this.model?this.view.clear():(this.model=new RCloudNotebookMerger.model,this.view=new RCloudNotebookMerger.view(this.model),this.controller=new RCloudNotebookMerger.controller(this.model,this.view)),this.controller.show_dialog()}submit(){this.controller&&this.controller.submit_dialog()}is_open(){return this.controller&&this.controller.is_dialog_open()}};RCloud.UI.notebook_commands.add({merge:{section:"appear",sort:4e3,create:function(t){var i=ui_utils.fa_button("icon-code-fork icon-rotate-90","merge from","merge",RCloud.UI.notebook_commands.merge_icon_style(),!0);return i.click(function(i){e.show(),setTimeout(function(){$("#merge-notebook-id").val(t.gistname),$(".show-changes").click()},100)}),i}}}),RCloud.UI.shortcut_manager.add([{category:"Advanced",id:"merger-dialog-submit",description:"Submit merge dialogs.",keys:{win_mac:[["enter"]]},ignore_clash:!0,enable_in_dialogs:!0,on_page:["edit"],is_active:function(){return e.is_open()},action:function(){e.submit()}}]),RCloud.UI.advanced_menu.add({merge_notebook:{sort:1100,text:"Merge Notebook",modes:["edit"],disabled_reason:"You can't merge into a read only notebook",action:function(){e.show()}}})}},RCloudNotebookMerger.diff_engine=function(){const e=Object.freeze({NOCHANGE:"nochange",REMOVED:"removed",ADDED:"added"}),t=Object.freeze({NEW:"new",DELETED:"deleted",BINARY:"binary",IDENTICAL:"nochange",MODIFIED:"changed"});return class{constructor(){require(["diff.min"],e=>{this._engine=e})}getResolvedContent(e){if(e.isBinary)return e.content;if(-1!=[t.DELETED,t.NEW].indexOf(e.changeDetails.fileChangeType))return e.content;{let{diffs:i,lineInfo:o}=e.changeDetails,s=[];return _.filter(o,e=>e.diffType!=t.IDENTICAL&&!e.isRejected)?(_.each(o,(e,t)=>{("removed"==e.diffType&&e.isRejected||"added"==e.diffType&&!e.isRejected||"nochange"==e.diffType)&&s.push(i[t].value)}),s.join("")):e.content}}get_diff_info(i,o){const s=e=>!e||e.isBinary?"":e.content.length?e.content.endsWith("\n")?e.content:e.content+"\n":e.content;let n,r=!1;n=!i&&o?t.NEW:i&&!o?t.DELETED:i.isBinary?t.BINARY:s(i)==s(o)?t.IDENTICAL:t.MODIFIED,-1!=[t.NEW,t.DELETED,t.MODIFIED].indexOf(n)&&(s(i).length>25e4||s(o).length>25e4)&&(console.warn(`File ${i} or ${o} is too large, skipping diff generation`),r=!0);const l=((e,i,o,n)=>{switch(e){case t.MODIFIED:return i?[{removed:!0,value:s(o),count:s(o).split("\n").length},{added:!0,value:s(n),count:s(n).split("\n").length}]:this._engine.diffLines(s(o),s(n));case t.NEW:return[{added:!0,value:s(n),count:s(n).split("\n").length}];case t.DELETED:return[{removed:!0,value:s(o),count:s(o).split("\n").length}];default:return this._engine.diffLines(s(o),s(n))}})(n,r,i,o);let a=1,d=[];return l.forEach(t=>{d.push({startLineNumber:a,endLineNumber:a+(t.count-1),diffType:(t=>t.added?e.ADDED:t.removed?e.REMOVED:e.NOCHANGE)(t)}),a+=t.count}),{fileChangeType:n,diffs:l,content:_.pluck(l,"value").join(""),lineInfo:d,modifiedLineInfo:_.filter(d,t=>t.diffType!==e.NOCHANGE),get changeCount(){return this.modifiedLineInfo.length},get isChanged(){return-1!=[t.MODIFIED,t.BINARY].indexOf(this.fileChangeType)},owned:i,other:o,get isNewOrDeleted(){return this.isDeleted||this.isNew},get isDeleted(){return-1!=[t.DELETED].indexOf(this.fileChangeType)},get isNew(){return-1!=[t.NEW].indexOf(this.fileChangeType)}}}}}(),RCloudNotebookMerger.model=function(){const e=Object.freeze({same_notebook_error:"You cannot merge from your current notebook; the source must be a different notebook.",invalid_notebook_id_error:"Invalid notebook ID.",not_found_notebook_error:"The notebook could not be found.",no_file_to_upload_error:"No file to upload.",invalid_url_error:"Invalid RCloud Notebook URL."});return new class{constructor(){this.on_diff_complete=new RCloud.UI.event(this),this.on_file_diff_complete=new RCloud.UI.event(this),this.on_file_list_complete=new RCloud.UI.event(this),this.on_get_changes_error=new RCloud.UI.event(this),this.on_getting_changes=new RCloud.UI.event(this),this.on_reset_complete=new RCloud.UI.event(this),this.on_review_change=new RCloud.UI.event(this),this.on_changeset_change=new RCloud.UI.event(this),this.on_set_merge_source=new RCloud.UI.event(this),this.on_merge_start=new RCloud.UI.event(this),this.on_merge_complete=new RCloud.UI.event(this),this._diff_engine=new RCloudNotebookMerger.diff_engine,this._merge_source="id",this._notebook_from_file=void 0,this._other_notebook_description=void 0,this._comparison={}}get_notebook_merge_property(){rcloud.get_notebook_property(shell.gistname(),"merge-changes-by").catch(e=>{console.error(e),this.on_set_merge_source.notify({type:"id"})}).then(e=>{if(e&&-1!==e.indexOf(":")){var t=e.indexOf(":"),i=e.substring(0,t),o=e.substring(t+1);this._merge_source=i,this.on_set_merge_source.notify({type:i,value:o})}else this.on_set_merge_source.notify({type:"id"})})}reset(){this._merge_source="id",this._notebook_from_file=void 0,this._comparison={},this._other_notebook_description=void 0,this.on_reset_complete.notify()}get_merge_source(){return this._merge_source}update_merge_source(e){this._merge_source=e,this.on_set_merge_source.notify({type:e})}upload_file(e,t,i){Notebook.read_from_file(e,{on_load_end:()=>{},on_error:e=>{this._notebook_from_file=void 0,t&&t(e)},on_notebook_parsed:e=>{this._notebook_from_file=e,i&&i(e)}})}get_notebooks_info(e){let t={owned:{},other:{},union:{}},i={owned:shell.notebook.model.controller.current_gist(),other:e};return _.each(Object.keys(i),e=>{t[e].files=_.chain(RCloud.utils.clean_r(i[e].files)).values().map(e=>({isBinary:e.content.hasOwnProperty("r_type")||e.isBinary,type:Notebook.is_part_name(e.filename)?"part":"asset",filename:e.filename,content:e.content,language:e.language})).value()}),t.union.files=_.uniq(_.union(t.other.files,t.owned.files),!1,e=>e.type&&e.filename).sort((e,t)=>e.filename.localeCompare(t.filename,void 0,{numeric:!0})),t}get_changes(t){var i,o=t=>Notebook.valid_gist_id(t)?t.toLowerCase()===shell.gistname().toLowerCase()?Promise.reject(new Error(e.same_notebook_error)):rcloud.get_notebook(t):Promise.reject(new Error(e.invalid_notebook_id_error));this.on_getting_changes.notify(),"id"===this._merge_source?i=o:"file"===this._merge_source?i=(()=>this._notebook_from_file?Promise.resolve(this._notebook_from_file):Promise.reject(new Error(e.no_file_to_upload_error))):"url"===this._merge_source&&(i=(t=>{var i=RCloud.utils.get_notebook_from_url(t);return i?o(i):Promise.reject(new Error(e.invalid_url_error))})),i.call(this,t).then(e=>{this._other_notebook_description=e.description,rcloud.set_notebook_property(shell.gistname(),"merge-changes-by",`${this._merge_source}:${t}`),e.files[Object.keys(e.files)[0]].hasOwnProperty("filename")||e.files.hasOwnProperty("r_type")||Object.keys(e.files).forEach(t=>{t.endsWith(".b64")?(e.files[t].filename=t.substring(0,t.length-".b64".length),e.files[t].isBinary=!0):e.files[t].filename=t}),this._comparison=this.get_notebooks_info(e),this.update_compare_details()}).catch(t=>{let i;i=-1!==t.message.indexOf("Not Found (404)")?e.not_found_notebook_error:t.message,this.on_get_changes_error.notify({message:i})})}apply_review_change(e,t){let i=_.findWhere(this._comparison.union.files,{filename:e}),o=_.findWhere(i.changeDetails.modifiedLineInfo,{startLineNumber:t.startLineNumber,endLineNumber:t.endLineNumber});o.isRejected=!o.isRejected,this.on_review_change.notify({change:t,filename:i.filename,fileType:i.type}),this.on_changeset_change.notify(this._comparison.union.files)}update_compare_details(){const e=(e,t)=>{const i={filename:e,type:t},o=_.findWhere(this._comparison.owned.files,i),s=_.findWhere(this._comparison.other.files,i);return this._diff_engine.get_diff_info(o,s)};this.on_file_list_complete.notify({files:this._comparison.union.files}),_.each(this._comparison.union.files,t=>{t.changeDetails=e(t.filename,t.type),this.on_file_diff_complete.notify({isBinary:t.isBinary,fileType:t.type,filename:t.filename,changeDetails:t.changeDetails})}),this.on_changeset_change.notify(this._comparison.union.files)}setFileInclusion(e,t){let i=_.findWhere(this._comparison.union.files,e);i.include=t,i.changeDetails.isChanged&&i.changeDetails.modifiedLineInfo.forEach(e=>{e.isRejected=!t,this.on_review_change.notify({change:e,filename:i.filename,fileType:i.type})}),this.on_changeset_change.notify(this._comparison.union.files)}getFileChange(e){return _.findWhere(this._comparison.union.files,e)}getFileLineChanges(e){return _.findWhere(this._comparison.union.files,e).changeDetails.modifiedLineInfo}getFileChangesCount(e){let t=_.findWhere(this._comparison.union.files,e);return!t.isBinary&&t.changeDetails.isChanged?_.filter(t.changeDetails.modifiedLineInfo,e=>!e.isRejected).length:!t.isBinary||t.hasOwnProperty("include")&&!t.include?0:1}getNumberOfChanges(e){let t=_.findWhere(this._comparison.union.files,e);return!t.isBinary&&t.changeDetails.isChanged?t.changeDetails.modifiedLineInfo.length:t.isBinary?1:0}getChangesToApply(){return _.chain(this._comparison.union.files).filter(e=>(e=>{let{modifiedLineInfo:t}=e.changeDetails;return e.hasOwnProperty("include")?e.include:!(e.hasOwnProperty("include")||!e.isBinary)||t.length!==_.where(t,{isRejected:!0}).length})(e)).map(e=>{let t=e.content.hasOwnProperty("r_type")||!e.isBinary?e.filename:e.filename+".b64",i=e.changeDetails.isDeleted;return{filename:t,language:e.isBinary?null:e.language,content:this._diff_engine.getResolvedContent(e),erase:i}}).value()}applyMerge(){this.on_merge_start.notify();let e=this.getChangesToApply();e.length>0?editor.merge_notebook(e).then(()=>{this.on_merge_complete.notify()}):this.on_merge_complete.notify()}}},require(["vs/editor/editor.main"],()=>{monaco.languages.register({id:"rcloud"}),RCloudNotebookMerger.view=function(e){const t=Object.freeze({INIT:"init",GETTINGCHANGES:"gettingchanges",COMPARE:"compare",APPLYINGCHANGES:"applyingchanges"});jQuery.fn.setMergerDialogStage=function(e){return this.removeClass(Object.keys(t).map(e=>`stage-${e.toLowerCase()}`).join(" ")),this.addClass(`stage-${e}`),this};return new class{constructor(e){this._model=e,this._dialog_stage=t.INIT;let i=_.template($("#merger-template").html());this._templates={file_list:_.template($("#compare-file-list-snippet").html()),diffs_list:_.template($("#compare-stage-snippet").html())},this.transitionTimeSeconds=.4,this.setTransitionTimeout=(e=>{setTimeout(e,1e3*this.transitionTimeout+200)}),$("body").append(i({transitionTimeSeconds:this.transitionTimeSeconds})),this._dialog=$("#merger-dialog"),this._merge_source=$("#merge-changes-by"),this._merge_notebook_file=$("#merge-notebook-file"),this._merge_notebook_url=$("#merge-notebook-url"),this._merge_notebook_id=$("#merge-notebook-id"),this._editors={},this._error_selector="#merge-error",this._merge_notebook_title=$("#merge-notebook-title"),this._merge_notebook_details=$("#merge-notebook-details"),this._compare_file_list=$("#compare-file-list"),this._compare_stage=$("#compare-stage"),this._stageCssPrefix="stage-",this._button_show_changes=this._dialog.find(".btn-primary.btn-primary.show-changes"),this._button_merge=this._dialog.find(".btn-merge"),this._inputs=[this._merge_notebook_file,this._merge_notebook_url,this._merge_notebook_id],this._codelens_provider=null,this.registerCodeLensProvider(),this._button_show_changes.click(()=>{this._model.get_changes($(`#merge-notebook-${this._model.get_merge_source()}`).val())}),this._button_merge.click(()=>{this._model.applyMerge()}),this._merge_source.change(()=>{this._model.update_merge_source(this._merge_source.val())}),this._button_show_changes.click(()=>{this._model.get_changes($(`#merge-notebook-${this._model.get_merge_source()}`).val())});const o=e=>{13==e.keyCode&&this._model.get_changes($(`#merge-notebook-${this._model.get_merge_source()}`).val())};this._button_show_changes.keypress(o),this._merge_notebook_url.keypress(o),this._merge_source.keypress(o),this._merge_notebook_id.keypress(o),this._merge_notebook_file.keypress(o),this._button_merge.click(()=>{this._model.applyMerge()}),this._compare_stage.keypress(e=>{13==e.keyCode&&this._model.applyMerge()}),this._merge_notebook_file.click(()=>{this.clear_error(),this._merge_notebook_file.val(null)}).change(()=>{let e=this;this._model.upload_file(this._merge_notebook_file[0].files[0],t=>{e.show_error(t)})}),$(this._dialog).on("hidden.bs.modal",()=>{this.clear()}),$(this._dialog).on("click","table tr",e=>{let t=$(e.currentTarget).closest("tr").data("section"),i=this._compare_stage.find(`div[data-section="${t}"]`);this._compare_stage.scrollTo(i,500)}),$(this._dialog).on("click","tr .add",e=>{const t=$(e.currentTarget).closest("tr");t.toggleClass("excluded");let i=!t.hasClass("excluded"),o={type:t.data("filetype"),filename:t.data("filename")};this._model.setFileInclusion(o,i),$(e.currentTarget).attr("title",i?"This file will be added. Click to cancel.":"This file will not be added. Click to add.");let s=this._compare_stage.find(`div[data-filetype="${o.type}"][data-filename="${o.filename}"]`).closest(".diff-panel");i?s.removeClass("excluded"):s.addClass("excluded")}),$(this._dialog).on("click","tr .remove",e=>{const t=$(e.currentTarget).closest("tr");t.toggleClass("excluded");let i=!t.hasClass("excluded"),o={type:t.data("filetype"),filename:t.data("filename")};this._model.setFileInclusion(o,i),$(e.currentTarget).attr("title",i?"This file will be removed. Click to cancel.":"This file will not be removed. Click to remove.");let s=this._compare_stage.find(`div[data-filetype="${o.type}"][data-filename="${o.filename}"]`).closest(".diff-panel");i?s.removeClass("excluded"):s.addClass("excluded")}),$(this._dialog).on("click","tr .modify",e=>{const t=$(e.currentTarget).closest("tr");t.toggleClass("excluded");let i=!t.hasClass("excluded"),o={type:t.data("filetype"),filename:t.data("filename")};this._model.setFileInclusion(o,i);let s=this._compare_stage.find(`div[data-filetype="${o.type}"][data-filename="${o.filename}"]`).closest(".diff-panel");i?s.removeClass("excluded"):s.addClass("excluded"),this.updateModifySpanTitle(t,this._model.getFileChangesCount(o),this._model.getNumberOfChanges(o))}),this._model.on_set_merge_source.attach(({},e)=>{this.clear_error(),this._merge_source.val(e.type),$(this._dialog).find("div[data-by]").hide(),$(this._dialog).find(`div[data-by="${e.type}"]`).show(),_.isUndefined(e.value)||$(`#merge-notebook-${this._model.get_merge_source()}`).val("file"===e.type?"":e.value),this._dialog.modal({keyboard:!0})}),this._model.on_getting_changes.attach(()=>{this.update_stage(t.GETTINGCHANGES),this.clear_error()}),this._model.on_get_changes_error.attach(({},e)=>{this.update_stage(t.INIT),this._button_show_changes.text("Show Changes"),this.show_error(e.message)}),this._model.on_changeset_change.attach(({},e)=>{this._model.getChangesToApply().length?this._button_merge.text("Merge"):this._button_merge.text("No Changes")}),this._model.on_reset_complete.attach(()=>{Object.keys(this._editors).forEach(e=>{this._editors[e].editor&&this._editors[e].editor.dispose()}),this._editors={},this._compare_file_list.html(""),this._compare_stage.html(""),this.reset_getting_changes_state(),this._inputs.forEach(e=>{e.val("")}),this._merge_notebook_details.html(""),this.update_stage(t.INIT),this._button_merge.text("Merge")}),this._model.on_file_list_complete.attach(({},e)=>{this.update_stage(t.COMPARE),this._compare_file_list.html(this._templates.file_list({files:e.files})),this._compare_stage.html(this._templates.diffs_list({files:e.files}))}),this._model.on_file_diff_complete.attach(({},e)=>{let t=e.changeDetails,i=e.filename,o=this._compare_stage.find(`div[data-filetype="${e.fileType}"][data-filename="${i}"]`),s=o.closest(".panel").find(".diffLoader"),n=(e,t,i,o)=>{e.css("left","0px"),e.css("right","0px");let s=(t+i)*o.lineHeight;e.css("height",s+"px")};if(t.isChanged&&!e.isBinary){let e=$('<div class="compare_editor"></div>');o.append(e),o.closest(".panel").addClass("panel-warning").addClass("diff-changed");let r=()=>{this._editors[i]={editor:monaco.editor.create(e[0],{language:"rcloud",fontSize:11,scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},glyphMargin:!0})},this._editors[i].apply_change=this._editors[i].editor.addCommand(0,(e,t)=>{this._model.apply_review_change(i,t)});let o=monaco.editor.createModel(t.content,"rcloud");this._editors[i].model_id=o.id,this._editors[i].editor.setModel(o),n(e,o.getLineCount(),t.modifiedLineInfo.length,this._editors[i].editor.getConfiguration()),$(".monaco-scrollable-element").each(function(){this.style.left="0px",this.style.width="110%"}),this._editors[i].editor.layout(),this.updateReviewDecorations(i),s.remove()};this.setTransitionTimeout(r)}else if(t.isChanged)o.closest(".panel").addClass("panel-warning").addClass("diff-binary"),o.html("binary file"),s.remove();else if(t.isNewOrDeleted)if(t.isDeleted?o.closest(".panel").addClass("panel-danger").addClass("diff-deleted"):o.closest(".panel").addClass("panel-success").addClass("diff-added"),e.isBinary)o.html("binary file"),s.remove();else{let e=$('<div class="compare_editor"></div>');o.append(e);let r=()=>{this._editors[i]={editor:monaco.editor.create(e[0],{language:"rcloud",fontSize:11,scrollBeyondLastLine:!1,minimap:{enabled:!1},readOnly:!0})};let o=monaco.editor.createModel(t.owned?t.owned.content:t.other.content,"rcloud");this._editors[i].model_id=o.id,this._editors[i].editor.setModel(o),n(e,o.getLineCount(),0,this._editors[i].editor.getConfiguration()),$(".monaco-scrollable-element").each(function(){this.style.left="0px",this.style.width="110%"}),this._editors[i].editor.layout(),s.remove()};this.setTransitionTimeout(r)}else o.closest(".panel").addClass("panel-default").addClass("diff-no-change"),o.html("no change"),s.remove()}),this._model.on_file_diff_complete.attach(({},e)=>{let t,i,o,s,n,r,l,a;i=(t=this._compare_file_list.find(`tr[data-filetype="${e.fileType}"][data-filename="${e.filename}"]`)).find(".isTo span"),n=(s=t.find(".changes")).find(".modify"),r=s.find(".equal"),l=s.find(".add"),a=s.find(".remove"),(o=s.find(".diffLoader")).remove();let{owned:d,other:_,isChanged:h,changeCount:c}=e.changeDetails,g=e.isBinary;if((d||!d&&_)&&(i.html(e.filename),d?_||(t.addClass("deletion"),a.attr("title","This file will be deleted. Click to cancel."),a.show()):(t.addClass("addition"),l.attr("title","This file will be added. Click to cancel."),l.show())),h){let e=g?1:c;this.updateModifySpanTitle(t,e,e),n.show()}d&&_&&!h&&r.show()}),this._model.on_merge_start.attach(()=>{this.update_stage(t.APPLYINGCHANGES)}),this._model.on_merge_complete.attach(()=>{this._dialog.modal("hide")}),this._model.on_review_change.attach(({},e)=>{this._editors[e.filename];let t=this._model.getFileLineChanges({filename:e.filename,type:e.fileType});this.updateReviewDecorations(e.filename);let i=t.length-_.filter(t,e=>e.isRejected).length,o=this._compare_file_list.find(`tr[data-filetype="${e.fileType}"][data-filename="${e.filename}"]`);this.updateModifySpanTitle(o,i,t.length);let s=this._compare_stage.find(`div[data-filetype="${e.fileType}"][data-filename="${e.filename}"]`).closest(".diff-panel");0===i?s.addClass("excluded"):s.removeClass("excluded")})}updateModifySpanTitle(e,t,i){let o=e.find(".modify");o.attr("title",t?`${t} change${1!=t?"s":""} will be applied to this file. Click to reject all changes.`:"This file will not be modified. Click to apply all incomming changes."),e[t?"removeClass":"addClass"]("excluded"),o.find(".count").html(t),t<i?o.find(".total").html(i).show():o.find(".total").html(i).hide()}updateReviewDecorations(e){let t=this._editors[e];t.editor.getModel().setValue(t.editor.getModel().getValue());let i=_.chain(this._model.getFileLineChanges({filename:e})).map(e=>({range:new monaco.Range(e.startLineNumber,1,e.endLineNumber,1),options:{isWholeLine:!0,className:e.isRejected?"":e.diffType,glyphMarginClassName:e.diffType}})).value();this.update_decorations(e,t.editor.deltaDecorations(this.get_decorations(e),i))}registerCodeLensProvider(){this._codelens_provider||(this._codelens_provider=monaco.languages.registerCodeLensProvider("rcloud",{provideCodeLenses:e=>{let t=_.filter(Object.keys(this._editors),t=>this._editors[t].model_id===e.id)[0],i=this._editors[t];return i?i.apply_change?_.map(this._model.getFileLineChanges({filename:t}),(e,o)=>({range:{startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber},id:o,command:{id:i.apply_change,title:((e,t)=>"added"==e?t?"Add content":"Ignore added content":t?"Delete content":"Keep deleted content")(e.diffType,e.isRejected),filename:t,model_id:i.model_id,arguments:{startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,diffType:e.diffType}}})):[]:(console.warn("editor for model id "+e.id+" not found"),[])},resolveCodeLens:(e,t)=>e.id===t.command.model_id?t:null}))}update_decorations(e,t){this._editors[e].delta_decorations=t||[]}get_decorations(e){let t=this._editors[e].delta_decorations;return t||[]}clear_error(){$(this._error_selector).remove()}show_error(e){this.clear_error(),$("<div />",{id:this._error_selector.substring(1),text:e}).appendTo($(this._dialog).find(`div[data-by="${this._model.get_merge_source()}"]`))}has_error(){return $(this._error_selector).length}reset_getting_changes_state(){this._button_show_changes.text("Show Changes")}clear(){this._model.reset()}submit(){switch(this._dialog_stage){case t.INIT:this._model.get_changes($(`#merge-notebook-${this._model.get_merge_source()}`).val());break;case t.COMPARE:this._model.applyMerge()}}update_stage(e){switch(this._dialog_stage=e,e){case t.INIT:this.reset_getting_changes_state(),this._merge_notebook_details.html(""),this._merge_notebook_title.html("Merge Changes");break;case t.COMPARE:this._merge_notebook_title.html("Apply Changes"),this._merge_notebook_details.html(`from ${this._model._other_notebook_description}`);break;case t.APPLYINGCHANGES:this._merge_notebook_title.html("Applying changes"),this._button_show_changes.text("Applying changes");break;case t.GETTINGCHANGES:this._merge_notebook_title.html("Getting changes"),this._button_show_changes.text("Getting changes");break;default:this._merge_notebook_title.html("Merge Changes"),this._merge_notebook_details.html("")}this._dialog.setMergerDialogStage(e.toLowerCase())}open(){this._model.get_notebook_merge_property()}is_open(){return this._dialog.is(":visible")}}(e)}}),RCloudNotebookMerger.controller=function(e,t){return new class{constructor(e,t){this._model=e,this._view=t}show_dialog(){this._view.open()}submit_dialog(){this._view.submit()}is_dialog_open(){return this._view.is_open()}}(e,t)};
//# sourceMappingURL=merger_bundle.min.js.map